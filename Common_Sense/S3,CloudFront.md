> AWS S3와 CloudFront CDN을 통해 정적 웹사이트를 배포할 수 있다.

<image src={'https://velog.velcdn.com/images/chloeee/post/d17c23fd-6926-41f4-a0d4-adf4f1a2452f/image.png'} alt="img" width="600px"/>

### AWS s3란?

Simple Storage Service의 약자이며 파일이 담긴 서버의 역할을 대신하는 서비스이다.
S3에서는 각각의 저장된 데이터를 객체라고 부른다. 또한 Bucket을 생성해서 관리하게 되는데 이 Bucket은 객체들이 모여있는 최상위 디렉토리라고 할 수 있다.

#### s3장점

- 저렴하고, 무제한 용량에 빠르고 안전하게 데이터를 저장할 수 있다.

### CloudFront

cloudFront는 html,css,js 및 이미지 파일과 같은 정적, 동적 웹 컨텐츠를 사용자에게 더 빨리 배포하도록 지원하는 CDN(컨텐츠 전송 네트워크)서비스다.
client에게 빠른 전송 속도를 제공하기 위해 세계 이곳저곳에 중계서버 (Edge Location)를 두고 client에게 가장 가까운 서버에서 웹 자원을 대신 전달하여 빠르게 데이터를 제공한다.
CDN을 이용해 전 세계의 사용자에게 더 가까운 edge로 캐싱되어 사용자는 더 빠르게 페이지에 응답받을 수 있다.

- 쉽게 말해 AWS에서 제공하는 CDN 서비스
- 캐싱을 통해 사용자에게 빠른 데이터 전송 속도를 제공함을 목적으로 한다
- 전세계 여기 저기에 Edge 서버를 두고 클라이언트에 가장 가까운 Edge Server를 찾아 지연 시간을 최소화한다.
- S3에 저장된 컨텐츠를 직접 접근하지 않아도 되므로 S3의 비용이 감소되고 더 빠른 응답을 지원한다.

#### 중요 개념

- `origin` : 원본데이터를 갖고 있는 서버, 보통 AWS에서 S3,EC2 인스턴스를 의미한다.
- `Edge Location(Edge Server)`: AWS에서 제공하는 전 세계에 퍼져있는 중계 서버, 요청받은 데이터를 빠르게 응답해주기 위해 cache기능을 제공한다.

#### CDN은 무엇인가?

CDN은 서버와 사용자 사이의 물리적 거리를 줄여 콘텐츠 로딩에 소요되는 시간을 최소화한다. CDN은 각 지역에 캐시 서버를 분산 배치해 근접한 사용자의 요청에 원본 서버가 아닌 캐시 서버가 콘텐츠를 전달한다.

CDN은 동영상 스트리밍이나 온라인 게임, 대용량 파일 전송, 그리고 해상도가 높아 용량이 큰 이미지를 다루는 쇼핑몰, 포털 사이트 등에서 안정적인 서비스 제공을 위해 활용되고 있다.

#### S3와 CloudFront를 통한 요청의 흐름

- 클라이언트가 바로 S3로 접근하는 것이 아니다.

1. 클라이언트로부터 Edge Server로의 요청이 발생
2. Edge Server는 요청이 발생한 데이터에 대하여 캐싱 여부를 확인
3. 사용자의 근거리에 위치한 Edge Server 중 캐싱 데이터가 존재하면 사용자의 요청에 맞는 데이터를 응답
4. 사용자의 요청에 적합한 데이터가 캐싱되어있지 않은 경우 Origin Server로 요청이 포워딩
5. 요청받은 데이터에 대해 Origin Server에서 획득한 후 Edge Server에 캐싱 데이터를 생성하고 클라이언트로 응답한다.

### 왜 s3와 CloudFront를 같이 써야할까?

사용자가 원격지에 있는 Origin Server로부터 HTML,CSS,JS등의 컨텐츠를 다운받을 때 물리적으로 가까이 있는 서버에서 받는 것보다 시간이 좀 더 오래 걸린다.
그렇기에 이 응답시간을 줄이려면 CloudFront같은 CDN서비스를 이용해 사용자가 있는 위치에서 가장 가까운 곳에 위치한 서버에 해당 컨텐츠를 저장해 캐싱하고,
컨텐츠 요청 시 멀리있는 origin server가 아니라 가까이에 있는 cache server가 응답을 줄 수 있게 해야 한다.

보통 이런 CDN은 전 세계적으로 서비스할 때 중요시된다. 글로벌 서비스를 하는 경우가 아니라 특정 국가나 지역만을 타깃으로 할 때에는 CDN서비스가 오히려 불필요한 연결 지점을 늘릴 수 있다.

참고: https://newwisdom.tistory.com/m/88
